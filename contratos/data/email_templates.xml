<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Plantilla de notificaci√≥n de vencimiento (2 meses antes) -->
        <record id="email_template_contract_expiry_warning" model="mail.template">
            <field name="name">Contrato - Aviso de Vencimiento (2 meses)</field>
            <field name="model_id" ref="model_contract_general"/>
            <field name="subject">‚ö†Ô∏è Contrato ${object.name} vence en 2 meses - ${object.partner_id.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.contract_manager_id.email}</field>
            <field name="body_html"><![CDATA[
                <p>Estimado/a ${object.contract_manager_id.name},</p>
                
                <p>Le informamos que el contrato <strong>${object.name}</strong> 
                con la empresa <strong>${object.partner_id.name}</strong> 
                vencer√° el <strong>${object.date_end}</strong> (en aproximadamente 2 meses).</p>
                
                <p><strong>Detalles del contrato:</strong></p>
                <ul>
                    <li>Cliente: ${object.partner_id.name}</li>
                    <li>Tipo: ${object.contract_type_id.name}</li>
                    <li>Valor: ${object.contract_value} ${object.currency_id.name}</li>
                    <li>Estado actual: ${object.state}</li>
                    <li>Renovaci√≥n autom√°tica: ${'S√≠' if object.auto_renewal else 'No'}</li>
                </ul>
                
                <p>Por favor, tome las acciones necesarias para la renovaci√≥n o finalizaci√≥n del contrato.</p>
                
                <p>Saludos,<br/>
                Sistema de Gesti√≥n de Contratos</p>
            ]]></field>
        </record>

        <!-- Plantilla de notificaci√≥n de vencimiento (d√≠a del vencimiento) -->
        <record id="email_template_contract_expiry" model="mail.template">
            <field name="name">Contrato - Vencimiento Hoy</field>
            <field name="model_id" ref="model_contract_general"/>
            <field name="subject">üö® Contrato ${object.name} vence HOY - ${object.partner_id.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.contract_manager_id.email}</field>
            <field name="body_html"><![CDATA[
                <p>Estimado/a ${object.contract_manager_id.name},</p>
                
                <p><strong>URGENTE:</strong> El contrato <strong>${object.name}</strong> 
                con la empresa <strong>${object.partner_id.name}</strong> 
                <strong>VENCE HOY</strong> (${object.date_end}).</p>
                
                <p><strong>Detalles del contrato:</strong></p>
                <ul>
                    <li>Cliente: ${object.partner_id.name}</li>
                    <li>Tipo: ${object.contract_type_id.name}</li>
                    <li>Valor: ${object.contract_value} ${object.currency_id.name}</li>
                    <li>Renovaci√≥n autom√°tica: ${'S√≠' if object.auto_renewal else 'No'}</li>
                </ul>
                
                <p><strong>Acci√≥n requerida inmediatamente:</strong></p>
                <ul>
                    <li>Renovar el contrato si es necesario</li>
                    <li>Finalizar el contrato si no se renueva</li>
                    <li>Actualizar el estado del contrato en el sistema</li>
                </ul>
                
                <p>Saludos,<br/>
                Sistema de Gesti√≥n de Contratos</p>
            ]]></field>
        </record>

        <!-- Plantilla de notificaci√≥n de renovaci√≥n -->
        <record id="email_template_contract_renewal" model="mail.template">
            <field name="name">Contrato - Notificaci√≥n de Renovaci√≥n</field>
            <field name="model_id" ref="model_contract_general"/>
            <field name="subject">‚úÖ Contrato ${object.name} renovado exitosamente - ${object.partner_id.name}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="email_to">${object.contract_manager_id.email}</field>
            <field name="body_html"><![CDATA[
                <p>Estimado/a ${object.contract_manager_id.name},</p>
                
                <p>Le informamos que el contrato <strong>${object.name}</strong> 
                con la empresa <strong>${object.partner_id.name}</strong> 
                ha sido <strong>renovado exitosamente</strong>.</p>
                
                <p><strong>Detalles de la renovaci√≥n:</strong></p>
                <ul>
                    <li>Cliente: ${object.partner_id.name}</li>
                    <li>Fecha anterior de vencimiento: ${object.last_renewal_date}</li>
                    <li>Nueva fecha de vencimiento: ${object.date_end}</li>
                    <li>N√∫mero de renovaciones: ${object.renewal_count}</li>
                    <li>Valor del contrato: ${object.contract_value} ${object.currency_id.name}</li>
                </ul>
                
                <p>El contrato contin√∫a vigente con las mismas condiciones.</p>
                
                <p>Saludos,<br/>
                Sistema de Gesti√≥n de Contratos</p>
            ]]></field>
        </record>
    </data>
</odoo>